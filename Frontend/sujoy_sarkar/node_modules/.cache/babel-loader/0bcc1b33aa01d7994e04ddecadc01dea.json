{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.closest = exports.focusPreviousTabbable = exports.focusNextTabbable = exports.getPreviousTabbable = exports.getNextTabbable = exports.getLastTabbableIn = exports.getFirstTabbableIn = exports.getAllTabbable = exports.getFirstFocusable = exports.getAllFocusable = void 0;\n\nvar tabbable_1 = require(\"./tabbable\");\n\nvar SELECTORS = ['input', 'select', 'textarea', 'a[href]', 'area[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=false])'];\nvar selector = SELECTORS.join();\n\nvar getAllFocusable = function (container) {\n  var allFocusable = Array.from(container.querySelectorAll(selector));\n  allFocusable.unshift(container);\n  return allFocusable.filter(tabbable_1.isFocusable);\n};\n\nexports.getAllFocusable = getAllFocusable;\n\nvar getFirstFocusable = function (container) {\n  var allFocusable = exports.getAllFocusable(container);\n  return allFocusable.length ? allFocusable[0] : null;\n};\n\nexports.getFirstFocusable = getFirstFocusable;\n\nvar getAllTabbable = function (container, fallbackToFocusable) {\n  var allFocusable = Array.from(container.querySelectorAll(selector));\n  var allTabbable = allFocusable.filter(tabbable_1.isTabbable);\n\n  if (tabbable_1.isTabbable(container)) {\n    allTabbable.unshift(container);\n  }\n\n  if (!allTabbable.length && fallbackToFocusable) {\n    return allFocusable;\n  }\n\n  return allTabbable;\n};\n\nexports.getAllTabbable = getAllTabbable;\n\nvar getFirstTabbableIn = function (container, fallbackToFocusable) {\n  var first = exports.getAllTabbable(container, fallbackToFocusable)[0];\n  return first || null;\n};\n\nexports.getFirstTabbableIn = getFirstTabbableIn;\n\nvar getLastTabbableIn = function (container, fallbackToFocusable) {\n  var allTabbable = exports.getAllTabbable(container, fallbackToFocusable);\n  return allTabbable[allTabbable.length - 1] || null;\n};\n\nexports.getLastTabbableIn = getLastTabbableIn;\n\nvar getNextTabbable = function (container, fallbackToFocusable) {\n  var allFocusable = exports.getAllFocusable(container);\n  var index = allFocusable.indexOf(document.activeElement);\n  var slice = allFocusable.slice(index + 1);\n  return slice.find(tabbable_1.isTabbable) || allFocusable.find(tabbable_1.isTabbable) || (fallbackToFocusable ? slice[0] : null);\n};\n\nexports.getNextTabbable = getNextTabbable;\n\nvar getPreviousTabbable = function (container, fallbackToFocusable) {\n  var allFocusable = exports.getAllFocusable(container).reverse();\n  var index = allFocusable.indexOf(document.activeElement);\n  var slice = allFocusable.slice(index + 1);\n  return slice.find(tabbable_1.isTabbable) || allFocusable.find(tabbable_1.isTabbable) || (fallbackToFocusable ? slice[0] : null);\n};\n\nexports.getPreviousTabbable = getPreviousTabbable;\n\nvar focusNextTabbable = function (container, fallbackToFocusable) {\n  var nextTabbable = exports.getNextTabbable(container, fallbackToFocusable);\n\n  if (nextTabbable && tabbable_1.isHTMLElement(nextTabbable)) {\n    nextTabbable.focus();\n  }\n};\n\nexports.focusNextTabbable = focusNextTabbable;\n\nvar focusPreviousTabbable = function (container, fallbackToFocusable) {\n  var previousTabbable = exports.getPreviousTabbable(container, fallbackToFocusable);\n\n  if (previousTabbable && tabbable_1.isHTMLElement(previousTabbable)) {\n    previousTabbable.focus();\n  }\n};\n\nexports.focusPreviousTabbable = focusPreviousTabbable;\n\nvar matches = function (element, selectors) {\n  if ('matches' in element) return element.matches(selectors);\n  if ('msMatchesSelector' in element) return element.msMatchesSelector(selectors);\n  return element.webkitMatchesSelector(selectors);\n};\n\nvar closest = function (element, selectors) {\n  if ('closest' in element) return element.closest(selectors);\n\n  do {\n    if (matches(element, selectors)) return element;\n    element = element.parentElement || element.parentNode;\n  } while (element !== null && element.nodeType === 1);\n\n  return null;\n};\n\nexports.closest = closest;","map":{"version":3,"sources":["../src/dom-query.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.closest = exports.focusPreviousTabbable = exports.focusNextTabbable = exports.getPreviousTabbable = exports.getNextTabbable = exports.getLastTabbableIn = exports.getFirstTabbableIn = exports.getAllTabbable = exports.getFirstFocusable = exports.getAllFocusable = void 0;\nvar tabbable_1 = require(\"./tabbable\");\nvar SELECTORS = [\n    'input',\n    'select',\n    'textarea',\n    'a[href]',\n    'area[href]',\n    'button',\n    '[tabindex]',\n    'audio[controls]',\n    'video[controls]',\n    '[contenteditable]:not([contenteditable=false])',\n];\nvar selector = SELECTORS.join();\nvar getAllFocusable = function (container) {\n    var allFocusable = Array.from(container.querySelectorAll(selector));\n    allFocusable.unshift(container);\n    return allFocusable.filter(tabbable_1.isFocusable);\n};\nexports.getAllFocusable = getAllFocusable;\nvar getFirstFocusable = function (container) {\n    var allFocusable = exports.getAllFocusable(container);\n    return allFocusable.length ? allFocusable[0] : null;\n};\nexports.getFirstFocusable = getFirstFocusable;\nvar getAllTabbable = function (container, fallbackToFocusable) {\n    var allFocusable = Array.from(container.querySelectorAll(selector));\n    var allTabbable = allFocusable.filter(tabbable_1.isTabbable);\n    if (tabbable_1.isTabbable(container)) {\n        allTabbable.unshift(container);\n    }\n    if (!allTabbable.length && fallbackToFocusable) {\n        return allFocusable;\n    }\n    return allTabbable;\n};\nexports.getAllTabbable = getAllTabbable;\nvar getFirstTabbableIn = function (container, fallbackToFocusable) {\n    var first = exports.getAllTabbable(container, fallbackToFocusable)[0];\n    return first || null;\n};\nexports.getFirstTabbableIn = getFirstTabbableIn;\nvar getLastTabbableIn = function (container, fallbackToFocusable) {\n    var allTabbable = exports.getAllTabbable(container, fallbackToFocusable);\n    return allTabbable[allTabbable.length - 1] || null;\n};\nexports.getLastTabbableIn = getLastTabbableIn;\nvar getNextTabbable = function (container, fallbackToFocusable) {\n    var allFocusable = exports.getAllFocusable(container);\n    var index = allFocusable.indexOf(document.activeElement);\n    var slice = allFocusable.slice(index + 1);\n    return (slice.find(tabbable_1.isTabbable) ||\n        allFocusable.find(tabbable_1.isTabbable) ||\n        (fallbackToFocusable ? slice[0] : null));\n};\nexports.getNextTabbable = getNextTabbable;\nvar getPreviousTabbable = function (container, fallbackToFocusable) {\n    var allFocusable = exports.getAllFocusable(container).reverse();\n    var index = allFocusable.indexOf(document.activeElement);\n    var slice = allFocusable.slice(index + 1);\n    return (slice.find(tabbable_1.isTabbable) ||\n        allFocusable.find(tabbable_1.isTabbable) ||\n        (fallbackToFocusable ? slice[0] : null));\n};\nexports.getPreviousTabbable = getPreviousTabbable;\nvar focusNextTabbable = function (container, fallbackToFocusable) {\n    var nextTabbable = exports.getNextTabbable(container, fallbackToFocusable);\n    if (nextTabbable && tabbable_1.isHTMLElement(nextTabbable)) {\n        nextTabbable.focus();\n    }\n};\nexports.focusNextTabbable = focusNextTabbable;\nvar focusPreviousTabbable = function (container, fallbackToFocusable) {\n    var previousTabbable = exports.getPreviousTabbable(container, fallbackToFocusable);\n    if (previousTabbable && tabbable_1.isHTMLElement(previousTabbable)) {\n        previousTabbable.focus();\n    }\n};\nexports.focusPreviousTabbable = focusPreviousTabbable;\nvar matches = function (element, selectors) {\n    if ('matches' in element)\n        return element.matches(selectors);\n    if ('msMatchesSelector' in element)\n        return element.msMatchesSelector(selectors);\n    return element.webkitMatchesSelector(selectors);\n};\nvar closest = function (element, selectors) {\n    if ('closest' in element)\n        return element.closest(selectors);\n    do {\n        if (matches(element, selectors))\n            return element;\n        element = (element.parentElement || element.parentNode);\n    } while (element !== null && element.nodeType === 1);\n    return null;\n};\nexports.closest = closest;\n//# sourceMappingURL=dom-query.js.map"]},"metadata":{},"sourceType":"script"}